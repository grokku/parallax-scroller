#!/bin/sh

# Warn before pushing to protected branches.
# Bypass with git push --no-verify

BRANCH=`git rev-parse --abbrev-ref HEAD`
PROTECTED_BRANCHES="^(main)"

if [[ "$BRANCH" =~ $PROTECTED_BRANCHES ]]; then
  echo "
                  .:.:=+********+++++++++++++++++********+-:.:.                 
               =+++***+----------------------------------=+***+++-              
          .-=***===-::::-::::::::::::::::::-::::::::::::-::::-==+***--          
        .+**++-:::::--:::::-:::::--:::::-:::::-:::::--:::::-:::::-=++**+.       
      -+**+--::::--::::-:-::::--::::-:::::---::::--::::---::::--::::-=+**=.     
    .+**+=:::-:-::::-:::::-:-::::--::::-:-:::-:-::::-:::::-:-:::::-::::=+**=    
   :+**=:::-:::::--:::::-:::::--::::--:::::-:::::--:::::-:::::-:::::--:::+**+.  
  :***=:-::::::::::::-:::::-::::::::::::-::::::::::::-:::::-::::::::::::--+**+. 
  ***+-:::-:::::-::-:::::-:::-::-::-::-:::-:::::-::-::-::-:::-::-::-::-:::-+**+ 
 -***-:-:-:::-::::::::-:::-:-::::::::::-:-:::-:-::::::::::-:-::::::::::-:-:=**+.
 =***::::::::::-::::-:::::::-::::::::::::::::::-::::::::::::-::::::::::-:::=***:
 =***:-:::-:-::::::-:::-:-:::-:-::::-:-:::-:-:::-::-:::-:-:::-:-::::-:-:::-=***.
 =*****************************************************************************.
 =***::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::=***.
 =***::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::-***.
 =***::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::-***.
 =***::::::::::=+++++++++++++++++++++++++++++++++++++++++++++++++-:::::::::-***.
 =***------==***+++++++++++++++++++++++++++++++++++++++++++++++++***=----=-=***.
 =***+++++++**+++=++++++=+++++=++++++=+++++=+++++=++++++=+++++=+++***+++++++***.
 =***:::::::-****++*++**+*+++*+**++**+*+++*+*+++*++*++**+*+++*+*****-::::::=***.
 =***:::::::::::-------------------------------------------------::::::::::-***.
 =***::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::-***:
 =***::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::-***.
 .+**+=-------------------------------------------------------------------=***= 
   .=***++*****++++++++++++++++++++++++***++++++++++++++++++++++++*****++***=.  
    -**+=+=+***-......................-=+=.......................=***==++***.   
    -***+==+***:.................................................+**+===+***    
    -***+===***-..............====================-..............+**+===+**+    
    :***+===+***:............-+======+=====+=====+=.............-***+===+**+    
     +**+====+**=...............................................+**+===++**-    
     :***+===++**=:..............---=+*****+---:..............-+**+====+***.    
      -***+=+==+****=:.::=+********+*+====++*+********+-::.:+****+====+**+.     
       :+**+====+++++****++++***+++===========++****+++*****++++====++**=.      
         -+**++============+***+=================+***+===========++***+:        
           .***+++===+====+**+===+======+=====+===+***+====+===++***=           
              --+***++++=+***+=====================+***+=++++***+-:             
                  .+++++*********************************++++=                  
                       .::...::::::-++*****+=-:::::....::.                      
                 


                      Direct push to \"$BRANCH\" is restricted.
                            
                        Use GitHub Flow workflow instead:
                  https://guides.github.com/introduction/flow/
"
  exit 1
fi
exit 0